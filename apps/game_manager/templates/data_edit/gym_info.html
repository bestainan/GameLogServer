{% extends "base/base.html" %}{%block right_panel%}<script src="http://lib.sinaapp.com/js/jquery/1.9.1/jquery-1.9.1.js"></script><script type="text/javascript">    function open1(ob){        var id= $(ob).attr('id');        var values=$('#'+id).attr('value')        var ps=values.split('##')[1]        var value=$('#cur_zone_start_num'+ps).attr('value')        var key='cur_zone_star_num_lst'        var message=''        var server_id=values.split('##')[2]        var title='关卡星级取值范围为0~3'        var user_id=values.split('##')[3]        jPrompt(message,value,title,function(input_value){            if (input_value){{#                        alert(input_value in [0,0,0,])#}                if (input_value in [0,0,0,0]){                    $.post('/Tyranitar6/data_edit/set_gym_zone_star/',{                        ps:ps,                        server_id:server_id,                        key:key,                        user_id:user_id,                        value:input_value,                    },                    function(data) {                        $('#' + 'cur_zone_start_num' + ps).text(input_value)                        $('#' + 'cur_zone_start_num' + ps).attr('value',input_value)                    })                }                else{alert('输入错误，请输入0~3之间的数字（包括）')}            };        });        };    function open2(ob){        var id=$(ob).attr('id')        var values=$('#'+id).attr('value'){#        alert(values)#}        var value=$('#'+id+'lb').attr('value')        var key=values.split('##')[0]        var user_id=values.split('##')[3]        var server_id=values.split('##')[2]        var T=0        var message=''        if ( value=="True" || value=="False"){            var title='请输入True或False，不区分大小写'            T=1        }        else{            var title='请输入正整数'        }        jPrompt(message,value,title,function(input_value){            if (input_value ) {                if (T==1){                    if (input_value.toLocaleUpperCase() == "TRUE" || input_value.toLocaleUpperCase() == 'FALSE') {                        input_value = input_value.toLowerCase()                        input_value = input_value.replace(/\b(\w)|\s(\w)/g, function (m) {                            return m.toUpperCase();                        });                    }                    else {                        alert(alert('请输入True或False，不区分大小写'))                    }                }{#                alert(input_value)#}                $.post('/Tyranitar6/data_edit/set_gym_value/',{                            server_id:server_id,                            key:key,                            user_id:user_id,                            value:input_value,                        },                        function(data) {                            if (data==''){                                $('#'+id+'lb').text(input_value)                                $('#'+id+'lb').attr('value',input_value)                            }                            else{                                alert(data)                            }                        })            }        })        };</script>        <div class="maincontent">            <div class="maincontentinner">                <div class="widget">                    <h4 class="widgettitle">道馆</h4>                    <div class="widgetcontent">                        <form class="stdform" action="/Tyranitar6/data_edit/gym_info/" method="post">                            <span style="font-size: large;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UID，帐号ID，玩家昵称，帐号 <span style="font-size: large; color: red; font-weight: 900">--3选1--</span></span>                            <div class="par">                                <span class="field">                                    <label>UID</label>                                    <input type="text" onkeyup="this.value=this.value.replace(/\D/g,'')"  onafterpaste="this.value=this.value.replace(/\D/g,'')"  name="user_uid"  class="input-medium" placeholder="请输入UID" value={{user_id}}>                                    <label>玩家昵称</label>                                    <input type="text"  name="user_name" class="input-medium" placeholder="请输入名字" value={{user_name}}>                                    <br />                                    <label>OpenID</label>                                    <input type="text" name="user_openid" class="input-medium" placeholder="请输入OpenID" value={{user_openid}}>                                    <br />                                    <label>游戏区服:</label>                                    <select id="server_id" name="server_id" class="uniformselect" value={{server_id}}>                                        {% for content in server_list %}                                            <option value="{{content.id}}" {% ifequal content.id server_id %}selected="selected"{% endifequal %}>                                                {{content.name}}                                            </option>                                        {% endfor %}                                    </select>                                </span>                                <span class="stdformbutton">                                    <button type="submit"  class="btn btn-primary">&nbsp; 提&nbsp;交&nbsp;</button>                                </span>                                <!--<button class="btn btn-primary">确定</button>-->                            </div>                        </form>                    </div><!--widgetcontent-->                </div><!--widget-->            {% if row_lst %}                <h5><a href="#">AAA</a></h5>                <div>                <table aria-describedby="dyntable_info" id="dyntable" class="table table-bordered responsive dataTable">                    <tbody aria-relevant="all" aria-live="polite" role="alert">                    {% for row in row_lst.items %}                         <tr class="gradeX odd">                             <td class="cneter" style="width: 250px">{{ row.1.0}}</td>                             <td id="{{ row.0 }}lb" class="cneter" style="width: 250px" value={{ row.1.1 }}>{{ row.1.1 }}</td>                             <td><a id="{{ row.0 }}"  class="btn btn-info" onclick="open2(this)" value='{{ row.0 }}##{{ row.1.1 }}##{{ cur_server_id }}##{{ user_id }}'><i class="iconfa-pencil"></i></a></td>                         </tr>                    {% endfor %}                    {% if cur_battle_buffs  %}                        <tr class="gradeX odd">                             <td class="cneter" style="width: 250px">当前拥有的战斗BUFF</td>                             <td id="{{ row.0 }}lb" class="cneter" style="width: 250px" >{{ cur_battle_buffs }}</td>                             <td><a id="{{ row.0 }}" ></a></td>                         </tr>                    {% endif %}                    {% if can_mop_zone  %}                        <tr class="gradeX odd">                             <td class="cneter" style="width: 250px">可以扫荡的关卡</td>                             <td id="{{ row.0 }}lb" class="cneter" style="width: 250px" >{{ can_mop_zone }}</td>                             <td><a id="{{ row.0 }}"  ></a></td>                         </tr>                    {% endif %}                    {% if has_reward_id  %}                        <tr class="gradeX odd">                             <td class="cneter" style="width: 250px">已经领取的奖励ID</td>                             <td id="{{ row.0 }}lb" class="cneter" style="width: 250px" >{{ has_reward_id }}</td>                             <td><a id="{{ row.0 }}"  ></a></td>                         </tr>                    {% endif %}{#                {% if cur_battle_buffs %}#}{#                    <h5><a href="#">当前拥有的战斗BUFF</a></h5>#}{#                    <div>#}{#                    <table aria-describedby="dyntable_info" id="dyntable" class="table table-bordered responsive dataTable">#}{#                        <tbody aria-relevant="all" aria-live="polite" role="alert">#}{#                        {% for row in cur_battle_buffs %}#}{#                             <tr class="gradeX odd">#}{#                                 <td class="cneter" style="width: 250px">战斗BUFF</td>#}{#                                 <td id="" class="cneter" style="width: 250px" >{{ row}}</td>#}    {#                             <td><a id="{{ row.0 }}"  class="btn btn-info" onclick="open2(this)" value='{{ row.0 }}##{{ row.1.1 }}##{{ cur_server_id }}##{{ user_id }}'><i class="iconfa-pencil"></i></a></td>#}{#                             </tr>#}{#                        {% endfor %}#}{#                {% endif %}#}{#                        #}{#                            <td class="center" style="width: 250px;" value=1>区域关卡1</td>#}{#                            <td id ='cur_zone_start_num1' class="center" style="width: 250px;" >{{ cur_zone_star_num_lst.0 }}</td>#}{#                            <td><a id="cur_zone_start_num_lst1"  class="btn btn-info" onclick="open1(this)" value='{{ cur_zone_star_num_lst.0 }}##1##{{ cur_server_id }}##{{ user_id }}'><i class="iconfa-pencil"></i></a></td>#}{#                        </tr>#}{#                        <tr class="gradeX odd">#}{#                            <td class="center" style="width: 250px;" >区域关卡2</td>#}{#                            <td id ='cur_zone_start_num2' class="center" style="width: 250px;">{{ cur_zone_star_num_lst.1 }}</td>#}{#                            <td><a id="cur_zone_start_num_lst2"  class="btn btn-info" onclick="open1(this)" value='{{ cur_zone_star_num_lst.1}}##2##{{ cur_server_id }}##{{ user_id }}'><i class="iconfa-pencil"></i></a></td>#}{#                        </tr>#}{#                        <tr class="gradeX odd">#}{#                            <td class="center" style="width: 250px;" value=1>区域关卡3</td>#}{#                            <td id ='cur_zone_start_num3'class="center" style="width: 250px;">{{ cur_zone_star_num_lst.2 }}</td>#}{#                            <td><a id="cur_zone_start_num_lst3"  class="btn btn-info" onclick="open1(this)" value='{{ cur_zone_star_num_lst.2 }}##3##{{ cur_server_id }}##{{ user_id }}'><i class="iconfa-pencil"></i></a></td>#}{#                        </tr>#}                    </tbody>                </table>                <br/>                </div>                <h5><a href="#">当前挑战区域内关卡星级</a></h5>                <div>                <table aria-describedby="dyntable_info" id="dyntable" class="table table-bordered responsive dataTable">                    <tbody aria-relevant="all" aria-live="polite" role="alert">                        <tr class="gradeX odd">                            <td class="center" style="width: 250px;" value=1>区域关卡1</td>                            <td id ='cur_zone_start_num1' class="center" style="width: 250px;" value={{ cur_zone_star_num_lst.0 }} >{{ cur_zone_star_num_lst.0 }}</td>                            <td><a id="cur_zone_start_num_lst1"  class="btn btn-info" onclick="open1(this)" value='{{ cur_zone_star_num_lst.0 }}##1##{{ cur_server_id }}##{{ user_id }}'><i class="iconfa-pencil"></i></a></td>                        </tr>                        <tr class="gradeX odd">                            <td class="center" style="width: 250px;" >区域关卡2</td>                            <td id ='cur_zone_start_num2' class="center" style="width: 250px;" value={{ cur_zone_star_num_lst.1  }}>{{ cur_zone_star_num_lst.1 }}</td>                            <td><a id="cur_zone_start_num_lst2"  class="btn btn-info" onclick="open1(this)" value='{{ cur_zone_star_num_lst.1}}##2##{{ cur_server_id }}##{{ user_id }}'><i class="iconfa-pencil"></i></a></td>                        </tr>                        <tr class="gradeX odd">                            <td class="center" style="width: 250px;" value=1>区域关卡3</td>                            <td id ='cur_zone_start_num3'class="center" style="width: 250px;" value={{ cur_zone_star_num_lst.2  }}>{{ cur_zone_star_num_lst.2 }}</td>                            <td><a id="cur_zone_start_num_lst3"  class="btn btn-info" onclick="open1(this)" value='{{ cur_zone_star_num_lst.2 }}##3##{{ cur_server_id }}##{{ user_id }}'><i class="iconfa-pencil"></i></a></td>                        </tr>                    </tbody>                </table>                <br/>{#                <li class="marginleft5 trashbtn"><a class="btn trash" title="删除此宠物" href="/Tyranitar6/data_edit/delete_monster_confirm/?user_id={{row_lst.0.0}}&server_id={{server_id}}&monster_uid={{monster.uid}}&name={{monster.name}}&starLevel={{monster.starLevel}}&level={{monster.level}}"><span class="icon-trash" style="width: 50px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;删&nbsp;除&nbsp;</span></a></li>#}                </div>            {% endif %}            </div>        </div>{%endblock%}