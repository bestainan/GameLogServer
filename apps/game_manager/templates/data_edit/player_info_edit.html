{% extends "base/base.html" %}{%block right_panel%}<script src="http://lib.sinaapp.com/js/jquery/1.9.1/jquery-1.9.1.js"></script>                            <script type="text/javascript">                                function open1(ob){                                    var id=$(ob).attr('id');                                    var values=$('#'+id).attr('value');                                    var type = values.split('##')[3]                                    if (type=='int'){                                        var title='请输入正整数,如有小数位则自动去除小数位'                                    }                                    else if (type=='float'){                                        var title='请输入正数，可以有小数位'                                    }                                    else if (type=='bool'){                                        var title='请输入True或False，不区分大小写'                                    }                                    var message = values.split('##')[2]                                    var value =  $('#'+id+'label').attr('value')                                    var server_id=values.split('##')[0]                                    var key=values.split('##')[1]                                    var user_id=values.split('##')[4]                                    var is_post=0                                    jPrompt(message,value,title,function(input_value){                                        if (input_value){                                            if (type=='int'){                                                if (isUnsignedInteger(input_value)=='False'){                                                    alert('请输入正整数,如有小数位则自动去除小数位')                                                }                                                else{                                                    is_post=1                                                }                                            }                                            else if (type=='float'){                                                if (isUnsignedNumeric(input_value)=='False'){                                                    alert('请输入正数，可以有小数位')                                                }                                                else{                                                    is_post=1                                                }                                            }                                            else if (type=='bool'){                                                if (input_value.toLocaleUpperCase()=="TRUE" || input_value.toLocaleUpperCase()=='FALSE'){                                                    is_post=1                                                    input_value=input_value.toLowerCase()                                                    input_value=input_value.replace(/\b(\w)|\s(\w)/g, function(m){                                                    return m.toUpperCase();                                                    });                                                }                                                else{                                                    alert('请输入True或False，不区分大小写')                                                }                                            }                                            if (is_post==1){                                                $.post('/Tyranitar6/data_edit/set_player_data/',{                                                server_id:server_id,                                                key:key,                                                user_id:user_id,                                                value:input_value,                                                type:type,                                            },                                            function(data){                                                if (data==''){                                                    $('#'+id+'label').text(input_value)                                                    $('#'+id+'label').attr('value',input_value)                                                    }                                                else{                                                    alert(data)                                                }                                            });                                            }                                        }                                    });                                    };                                function  isUnsignedInteger(a)                                    {                                        a=parseInt(a)                                        if (Math.abs(a)==a){                                            return 'True';                                        }                                        else {                                            return 'False';                                        }                                    }                                function   isUnsignedNumeric(a)                                    {                                        a=parseFloat(a)                                        if (Math.abs(a)==a){                                            return 'True';                                        }                                        else {                                            return 'False';                                        }                                    }                            </script>        <div class="maincontent">            <div class="maincontentinner">                <div class="widget">                    <h4 class="widgettitle">角色信息</h4>                    <div class="widgetcontent">                        <form class="stdform" action="/Tyranitar6/data_edit/player_info_edit/" method="post">                            <span style="font-size: large;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UID，帐号ID，玩家昵称，帐号 <span style="font-size: large; color: red; font-weight: 900">--3选1--</span></span>                            <div class="par">                                <span class="field">                                    <label>UID</label>                                    <input type="text" onkeyup="this.value=this.value.replace(/\D/g,'')"  onafterpaste="this.value=this.value.replace(/\D/g,'')"  name="user_uid" class="input-medium" placeholder="请输入UID">                                    <label>玩家昵称</label>                                    <input type="text"  name="user_name" class="input-medium" placeholder="请输入名字">                                    <br />                                    <label>OpenID</label>                                    <input type="text" name="user_openid" class="input-medium" placeholder="请输入OpenID">                                    <br />                                    <label>游戏区服:</label>                                    <select id="server_id" name="server_id" class="uniformselect" value={{server_id}}>                                        {% for content in server_list %}                                            <option value="{{content.id}}" {% ifequal content.id server_id %}selected="selected"{% endifequal %}>                                                {{content.name}}                                            </option>                                        {% endfor %}                                    </select>                                </span>                                <span class="stdformbutton">                                    <button type="submit"  class="btn btn-primary">&nbsp; 提&nbsp;交&nbsp;</button>                                </span>                                <!--<button class="btn btn-primary">确定</button>-->                            </div>                        </form>                    </div><!--widgetcontent-->                </div><!--widget-->                <h4 class="widgettitle">角色信息修改</h4>                <div id="dyntable_wrapper" class="dataTables_wrapper" role="grid">                    <table aria-describedby="dyntable_info" id="dyntable" class="table table-bordered responsive dataTable">                        <tbody aria-relevant="all" aria-live="polite" role="alert">                            {% for row in row_lst %}                                <tr class="gradeX odd">                                     <!--action="/Tyranitar6/data_edit/get_player_data/" method="post"-->                                    <td class="left" style="width: 20%;height: 30px">{{row.key_name}}</td>                                    {% if 'No' == row.type %}                                        <td class="left" style="width:20%">{{row.value}}</td>                                        <td class="left" style="width: 20%"></td>                                    {% elif 'bool' == row.type %}                                    <td class="left" style="width: 20%">                                        <label id="{{row.key}}label" style="width: 50px" name="name" value={{ row.value }}>{{ row.value }}</label>                                        </td>                                        <td class="left" style="width: 20%">                                        <a id="{{ row.key }}"  class="btn btn-info" onclick="open1(this)" value='{{row.server}}##{{ row.key }}##{{ row.key_name }}##{{row.type}}##{{ row.uid }}##{{ row.value }}'><i class="iconfa-pencil"></i></a>                                        </td>                                    {% else %}                                        <td class="left" style="width: 20%" >                                        <label id="{{row.key}}label" style="width: 50px;"  name="name" value={{ row.value }} >{{ row.value }}</label>                                            </td>                                        <td class="left" style="width: 20%">{#                                        <label  id="{{ row.key }}" lass="btn btn-info" onclick="open1(this)" value='{{row.server}}##{{ row.key }}##{{ row.key_name }}##{{row.type}}##{{ row.uid }}##{{ row.value }}'><i class="iconfa-pencil"></i></label>#}                                        <a id="{{ row.key }}"  class="btn btn-info" onclick="open1(this)" value='{{row.server}}##{{ row.key }}##{{ row.key_name }}##{{row.type}}##{{ row.uid }}##{{ row.value }}'><i class="iconfa-pencil"></i></a>                                        </td>                                    {% endif %}                                </tr>                            {% endfor %}                        </tbody>                    </table>                </div>            </div>        </div>{%endblock%}